{"ast":null,"code":"var _jsxFileName = \"/Users/prasanjitsarkar/VS Code/Self/SCHOOL_VACCINATION_PORTAL/client/src/components/DriveForm.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DriveForm = ({\n  form,\n  setForm,\n  editingId,\n  setEditingId,\n  drives,\n  fetchDrives,\n  enableChanges\n}) => {\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    var _drives$find;\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    const selectedDate = new Date(form.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const minAllowedDate = new Date();\n    minAllowedDate.setDate(today.getDate() + 15);\n    const isCreating = editingId === null;\n    const isDateChanged = ((_drives$find = drives.find(d => d.id === editingId)) === null || _drives$find === void 0 ? void 0 : _drives$find.date) !== form.date;\n    if (!enableChanges && (isCreating || isDateChanged) && selectedDate < minAllowedDate) {\n      alert('Vaccination drive date must be at least 15 days from today.');\n      return;\n    }\n    const payload = {\n      vaccine: form.vaccineName,\n      date: form.date,\n      doses: parseInt(form.doses),\n      classes: form.classes\n    };\n    try {\n      let url = 'http://localhost:5000/api/drives';\n      let method = 'POST';\n      if (!isCreating) {\n        url += `/${editingId}`;\n        method = 'PUT';\n      }\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n      await res.json();\n      setForm({\n        vaccineName: '',\n        date: '',\n        doses: '',\n        classes: ''\n      });\n      setEditingId(null);\n      fetchDrives();\n    } catch (err) {\n      console.error('Error saving drive:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-4 mt-4 shadow-sm rounded-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"mb-4 text-primary fw-bold\",\n      children: editingId !== null ? 'Edit Vaccination Drive' : 'Create Vaccination Drive'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [['vaccineName', 'date', 'doses', 'classes'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: field === 'vaccineName' ? 'Vaccine Name' : field === 'date' ? 'Date of Drive' : field === 'doses' ? 'Number of Available Doses' : 'Applicable Classes'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: field === 'date' ? 'date' : field === 'doses' ? 'number' : 'text',\n          name: field,\n          className: \"form-control\",\n          value: form[field],\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-start gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary px-4 py-2\",\n          children: editingId !== null ? 'Update' : 'Create'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), editingId !== null && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-secondary px-4 py-2\",\n          onClick: () => {\n            setEditingId(null);\n            setForm({\n              vaccineName: '',\n              date: '',\n              doses: '',\n              classes: ''\n            });\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_c = DriveForm;\nexport default DriveForm;\nvar _c;\n$RefreshReg$(_c, \"DriveForm\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","DriveForm","form","setForm","editingId","setEditingId","drives","fetchDrives","enableChanges","handleChange","e","target","name","value","handleSubmit","_drives$find","preventDefault","token","localStorage","getItem","selectedDate","Date","date","today","setHours","minAllowedDate","setDate","getDate","isCreating","isDateChanged","find","d","id","alert","payload","vaccine","vaccineName","doses","parseInt","classes","url","method","res","fetch","headers","Authorization","body","JSON","stringify","json","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","field","type","onChange","required","onClick","_c","$RefreshReg$"],"sources":["/Users/prasanjitsarkar/VS Code/Self/SCHOOL_VACCINATION_PORTAL/client/src/components/DriveForm.js"],"sourcesContent":["import React from 'react';\n\nconst DriveForm = ({\n  form,\n  setForm,\n  editingId,\n  setEditingId,\n  drives,\n  fetchDrives,\n  enableChanges,\n}) => {\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n\n    const selectedDate = new Date(form.date);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const minAllowedDate = new Date();\n    minAllowedDate.setDate(today.getDate() + 15);\n\n    const isCreating = editingId === null;\n    const isDateChanged = drives.find((d) => d.id === editingId)?.date !== form.date;\n\n    if (!enableChanges && (isCreating || isDateChanged) && selectedDate < minAllowedDate) {\n      alert('Vaccination drive date must be at least 15 days from today.');\n      return;\n    }\n\n    const payload = {\n      vaccine: form.vaccineName,\n      date: form.date,\n      doses: parseInt(form.doses),\n      classes: form.classes,\n    };\n\n    try {\n      let url = 'http://localhost:5000/api/drives';\n      let method = 'POST';\n\n      if (!isCreating) {\n        url += `/${editingId}`;\n        method = 'PUT';\n      }\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      await res.json();\n\n      setForm({ vaccineName: '', date: '', doses: '', classes: '' });\n      setEditingId(null);\n      fetchDrives();\n    } catch (err) {\n      console.error('Error saving drive:', err);\n    }\n  };\n\n  return (\n    <div className=\"card p-4 mt-4 shadow-sm rounded-3\">\n      <h4 className=\"mb-4 text-primary fw-bold\">\n        {editingId !== null ? 'Edit Vaccination Drive' : 'Create Vaccination Drive'}\n      </h4>\n      <form onSubmit={handleSubmit}>\n        {['vaccineName', 'date', 'doses', 'classes'].map((field) => (\n          <div className=\"mb-3\" key={field}>\n            <label className=\"form-label\">\n              {field === 'vaccineName'\n                ? 'Vaccine Name'\n                : field === 'date'\n                ? 'Date of Drive'\n                : field === 'doses'\n                ? 'Number of Available Doses'\n                : 'Applicable Classes'}\n            </label>\n            <input\n              type={field === 'date' ? 'date' : field === 'doses' ? 'number' : 'text'}\n              name={field}\n              className=\"form-control\"\n              value={form[field]}\n              onChange={handleChange}\n              required\n            />\n          </div>\n        ))}\n\n        <div className=\"d-flex justify-content-start gap-3\">\n          <button type=\"submit\" className=\"btn btn-primary px-4 py-2\">\n            {editingId !== null ? 'Update' : 'Create'}\n          </button>\n          {editingId !== null && (\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary px-4 py-2\"\n              onClick={() => {\n                setEditingId(null);\n                setForm({ vaccineName: '', date: '', doses: '', classes: '' });\n              }}\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default DriveForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}